define(["linkMode","configurationEvents","jquery","properties","socket","toastr","bootstrap"],function(t,e,o,n,i,a){!function(i){i.define("TooltipNode",i.ui.Component,{properties:{node:{get:function(){return this._node},set:function(e){e.model();this._node=e.node();var i=this.view("portData"),a=e.node().get("label"),s=e.node().get("iconType");if("optical-switch"==s||"patch-panel"==s){this.view("configData").set("class","linkhide"),this.view("templateData").set("class","linkhide"),t.getFlag()?this.view("classNamePort").set("class","popup-section"):this.view("classNamePort").set("class","linkhide");var c=[],l=(i._resources,n.socket()),p=function(t){var e=JSON.parse(t);"optical-switch"==s&&(e=JSON.parse(e)),e.forEach(function(t){var e=null;e="optical-switch"==s?t:JSON.parse(t),e.isAllocated="false"==e.status?!1:!0,c.push(e)})},d={name:a,type:s};l.emit("port-status-fetch",JSON.stringify(d)),l.on("port-status",function(t){p(t,i)}.bind(i)),setTimeout(function(){i.set("items",c)},500)}else if("host"==s){this.view("configData").set("class","linkhide"),this.view("templateData").set("class","linkhide"),t.getFlag()?this.view("classNamePort").set("class","popup-section"):this.view("classNamePort").set("class","linkhide");var r=n.rmsIp+"/";o.post(r,function(t){t.forEach(function(t){t.isAllocated="true"==t.isFree?!1:!0}),i.set("items",t)})}else{t.getFlag()?(this.view("classNamePort").set("class","popup-section"),this.view("configData").set("class","linkhide"),this.view("templateData").set("class","linkhide")):(this.view("classNamePort").set("class","linkhide"),this.view("configData").set("class","popup-section"),this.view("templateData").set("class","popup-section"));var r=n.rmsIp+"/"+a+"/port/find";o.post(r,function(t){t.forEach(function(t){t.isAllocated="true"==t.isFree?!1:!0}),i.set("items",t)})}}},topology:{},newNodeName:"",classNameConfig:function(){return t.getFlag()?"popup-section linkhide ":"popup-section "},classNamePort:function(){return t.getFlag()?"popup-section  ":"popup-section linkhide "}},view:{content:{content:[{tag:"div",name:"configData",events:{click:"{#onClickEvent}"},content:[{tag:"i",props:{"class":"fa fa-cog","aria-hidden":"true"}},{tag:"div",content:"Config",props:{"class":"label-data"}}]},{tag:"div",name:"templateData",events:{click:"{#onClickEvent1}"},content:[{tag:"i",props:{"class":"fa fa-file-text","aria-hidden":"true"}},{tag:"div",content:"Templates",props:{"class":"label-data"}}]},{tag:"div",name:"classNamePort",content:[{tag:"h6",content:"Select Port"},{tag:"div",name:"portData",props:{"class":"tooltip-container",template:{tag:"div",content:[{tag:"input",props:{type:"radio",name:"portselcted",disabled:"{isAllocated}"},events:{click:"{#onClickEvent2}"}},{tag:"div",content:"{name}",props:{"class":"label-data"}}]}}}]}],props:{"class":"custom-tooltip"}}},methods:{onClickEvent:function(){{var t=this.node();o("g.node-selected").attr("data-id")}o("#pageModal").load("templates/tab.html",function(){o("#pageModal ").modal("show"),e.init(t),e.savingDetails(),e.bridgeTable(),e.portTable()})},onClickEvent1:function(){var t=this.node();o("#pageModal").load("templates/templates.html",function(){o("#pageModal ").modal("show"),e.init(t),e.templateTable()})},onClickEvent2:function(){if(e.isSourceSelected()){if(!e.isValidLink(this.node().get("iconType"),e.getSourceNodeDetails().iconType))return void a.error("Components cannot be connected");var t=this,n="templates/tab1.html",i="fb-icon"==this.node().get("iconType"),s="fb-icon"==e.getSourceNodeDetails().iconType,c="optical-switch"==this.node().get("iconType"),l="optical-switch"==e.getSourceNodeDetails().iconType,p=(i||s)&!(i&s),d=(c||l)&!(c&l);if(p&&d)return void e.initFStoOB(t);p&&(n="templates/configuringFbLink.html"),o("#pageModal").load(n,function(){o("#pageModal ").modal("show"),o("#pageModal #saveLinkData").click(function(){e.initLinkEvents(t)})})}else e.setSourceNodeDetails({node:this.node().id(),iconType:this.node().get("iconType"),data:o("input[name='portselcted']:checked").next().text()})},modalEvent:function(){o("#myModal").modal("show")},onRemoveNode:function(){this.topology().removeNode(this.node().id())},onSaveName:function(){this.node().label(this.newNodeName())}}}),i.define("TooltipLink",i.ui.Component,{properties:{link:{},topology:{}},view:{content:{content:[{tag:"h1",content:[{tag:"span",content:"Link #"},{tag:"span",content:"{#link.id}"}]},{tag:"div",content:[{tag:"span",content:"From: ",props:{"class":"bold-text"}},{tag:"span",content:"{#link.model.source.name}"}]},{tag:"div",content:[{tag:"span",content:"To: ",props:{"class":"bold-text"}},{tag:"span",content:"{#link.model.target.name}"}]}],props:{"class":"custom-tooltip"}}}})}(nx)});